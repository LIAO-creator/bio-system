<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNA的秘密</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f4f4f9;
        }

        h1 {
            color: #4CAF50;
        }

        p {
            font-size: 18px;
            color: #333;
        }

        a {
            font-size: 20px;
            color: #007BFF;
            text-decoration: none;
        }

        .button {
            font-size: 20px;
            color: white;
            background-color: #4CAF50;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 30px;
        }

        .button:hover {
            background-color: #45a049;
        }

        #gameContainer {
            max-width: 100%;
            height: auto;
            margin-top: 20px;
        }

        canvas {
            background-color: #e6e6ff;
            border: 2px solid #333;
        }

        .score, .target-text {
            font-size: 25px;
            margin-top: 20px;
            color: #333;
        }
    </style>
</head>
<body>

    <!-- 页面标题和介绍部分 -->
    <h1>点击这里了解DNA的秘密</h1>
    <p>DNA，作为生命的遗传密码，包含了生物体的重要信息。点击下方链接，探索更多关于DNA的精彩内容！</p>
    <a href="https://liao-creator.github.io/bio-system/dna-page.html">继续探索</a>

    <!-- 游戏按钮 -->
    <button class="button" onclick="startGame()">进入核苷酸拼装游戏</button>

    <!-- 游戏画布容器 -->
    <div id="gameContainer" style="display: none;">
        <canvas id="gameCanvas"></canvas>
        <div class="score"></div>
        <div class="target-text"></div>
    </div>

    <!-- 游戏相关的脚本 -->
<script>
    // ...（前面的代码保持不变）

    // 优化后的游戏循环和检查逻辑
    function gameLoop() {
        const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
        timeLeft = 60 - elapsedTime;

        if (timeLeft <= 0) {
            endGame('游戏结束!');
            return;
        }

        // 清除画布背景
        ctx.fillStyle = BACKGROUND_COLOR;
        ctx.fillRect(0, 0, WIDTH, HEIGHT);

        // 绘制拼装区域
        ctx.strokeStyle = GREEN;
        ctx.lineWidth = 2;
        ctx.strokeRect(WIDTH / 2 - 200, HEIGHT / 2 + 50, 400, 200);

        // 显示剩余时间
        ctx.fillStyle = BLACK;
        ctx.font = font;
        ctx.fillText(`时间: ${timeLeft}秒`, 10, 40);

        // 显示分数
        ctx.fillText(`分数: ${score}`, WIDTH - 150, 40);

        // 显示目标核苷酸
        ctx.fillText(`目标: ${currentTarget}`, WIDTH / 2 - ctx.measureText(currentTarget).width / 2, 50);

        // 绘制组件
        components.forEach((component) => component.draw());

        requestAnimationFrame(gameLoop);
    }

    function checkAssembly(component) {
        const isCorrect = targetComponents.some(target => target[0] === component.name && target[1] === null);
        if (isCorrect) {
            score += 10;  // 增加分数
            // 标记已配对的核苷酸
            targetComponents = targetComponents.map(target => {
                if (target[0] === component.name) {
                    return [target[0], component];
                }
                return target;
            });
            // 检查是否所有核苷酸都已配对
            if (targetComponents.every(target => target[1] !== null)) {
                targetComponents = NUCLEOTIDES[getNewTargetText()];  // 切换到新的配对序列
                currentTarget = getNewTargetText(); // 更新目标序列
            }
        }
    }


        function endGame(message) {
            ctx.fillStyle = WHITE;
            ctx.fillRect(0, 0, WIDTH, HEIGHT);
            ctx.fillStyle = BLACK;
            ctx.font = '50px Arial';
            ctx.fillText(message, WIDTH / 2 - ctx.measureText(message).width / 2, HEIGHT / 2);
        }

        // 处理鼠标事件

</script>
</body>
</html>

